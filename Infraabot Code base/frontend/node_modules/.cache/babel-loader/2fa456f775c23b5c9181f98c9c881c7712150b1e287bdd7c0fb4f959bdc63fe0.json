{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Enhance = void 0;\nconst Factory_1 = require(\"../Factory\");\nconst Node_1 = require(\"../Node\");\nconst Validators_1 = require(\"../Validators\");\nfunction remap(fromValue, fromMin, fromMax, toMin, toMax) {\n  const fromRange = fromMax - fromMin,\n    toRange = toMax - toMin;\n  if (fromRange === 0) {\n    return toMin + toRange / 2;\n  }\n  if (toRange === 0) {\n    return toMin;\n  }\n  let toValue = (fromValue - fromMin) / fromRange;\n  toValue = toRange * toValue + toMin;\n  return toValue;\n}\nconst Enhance = function (imageData) {\n  const data = imageData.data,\n    nSubPixels = data.length;\n  let rMin = data[0],\n    rMax = rMin,\n    r,\n    gMin = data[1],\n    gMax = gMin,\n    g,\n    bMin = data[2],\n    bMax = bMin,\n    b;\n  const enhanceAmount = this.enhance();\n  if (enhanceAmount === 0) {\n    return;\n  }\n  for (let i = 0; i < nSubPixels; i += 4) {\n    r = data[i + 0];\n    if (r < rMin) {\n      rMin = r;\n    } else if (r > rMax) {\n      rMax = r;\n    }\n    g = data[i + 1];\n    if (g < gMin) {\n      gMin = g;\n    } else if (g > gMax) {\n      gMax = g;\n    }\n    b = data[i + 2];\n    if (b < bMin) {\n      bMin = b;\n    } else if (b > bMax) {\n      bMax = b;\n    }\n  }\n  if (rMax === rMin) {\n    rMax = 255;\n    rMin = 0;\n  }\n  if (gMax === gMin) {\n    gMax = 255;\n    gMin = 0;\n  }\n  if (bMax === bMin) {\n    bMax = 255;\n    bMin = 0;\n  }\n  let rMid, rGoalMax, rGoalMin, gMid, gGoalMax, gGoalMin, bMid, bGoalMax, bGoalMin;\n  if (enhanceAmount > 0) {\n    rGoalMax = rMax + enhanceAmount * (255 - rMax);\n    rGoalMin = rMin - enhanceAmount * (rMin - 0);\n    gGoalMax = gMax + enhanceAmount * (255 - gMax);\n    gGoalMin = gMin - enhanceAmount * (gMin - 0);\n    bGoalMax = bMax + enhanceAmount * (255 - bMax);\n    bGoalMin = bMin - enhanceAmount * (bMin - 0);\n  } else {\n    rMid = (rMax + rMin) * 0.5;\n    rGoalMax = rMax + enhanceAmount * (rMax - rMid);\n    rGoalMin = rMin + enhanceAmount * (rMin - rMid);\n    gMid = (gMax + gMin) * 0.5;\n    gGoalMax = gMax + enhanceAmount * (gMax - gMid);\n    gGoalMin = gMin + enhanceAmount * (gMin - gMid);\n    bMid = (bMax + bMin) * 0.5;\n    bGoalMax = bMax + enhanceAmount * (bMax - bMid);\n    bGoalMin = bMin + enhanceAmount * (bMin - bMid);\n  }\n  for (let i = 0; i < nSubPixels; i += 4) {\n    data[i + 0] = remap(data[i + 0], rMin, rMax, rGoalMin, rGoalMax);\n    data[i + 1] = remap(data[i + 1], gMin, gMax, gGoalMin, gGoalMax);\n    data[i + 2] = remap(data[i + 2], bMin, bMax, bGoalMin, bGoalMax);\n  }\n};\nexports.Enhance = Enhance;\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'enhance', 0, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);","map":{"version":3,"names":["Object","defineProperty","exports","value","Enhance","Factory_1","require","Node_1","Validators_1","remap","fromValue","fromMin","fromMax","toMin","toMax","fromRange","toRange","toValue","imageData","data","nSubPixels","length","rMin","rMax","r","gMin","gMax","g","bMin","bMax","b","enhanceAmount","enhance","i","rMid","rGoalMax","rGoalMin","gMid","gGoalMax","gGoalMin","bMid","bGoalMax","bGoalMin","Factory","addGetterSetter","Node","getNumberValidator","afterSetFilter"],"sources":["C:/Users/LENOVO/Desktop/INFRAMINDS/ChatBot/frontend/node_modules/konva/lib/filters/Enhance.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Enhance = void 0;\nconst Factory_1 = require(\"../Factory\");\nconst Node_1 = require(\"../Node\");\nconst Validators_1 = require(\"../Validators\");\nfunction remap(fromValue, fromMin, fromMax, toMin, toMax) {\n    const fromRange = fromMax - fromMin, toRange = toMax - toMin;\n    if (fromRange === 0) {\n        return toMin + toRange / 2;\n    }\n    if (toRange === 0) {\n        return toMin;\n    }\n    let toValue = (fromValue - fromMin) / fromRange;\n    toValue = toRange * toValue + toMin;\n    return toValue;\n}\nconst Enhance = function (imageData) {\n    const data = imageData.data, nSubPixels = data.length;\n    let rMin = data[0], rMax = rMin, r, gMin = data[1], gMax = gMin, g, bMin = data[2], bMax = bMin, b;\n    const enhanceAmount = this.enhance();\n    if (enhanceAmount === 0) {\n        return;\n    }\n    for (let i = 0; i < nSubPixels; i += 4) {\n        r = data[i + 0];\n        if (r < rMin) {\n            rMin = r;\n        }\n        else if (r > rMax) {\n            rMax = r;\n        }\n        g = data[i + 1];\n        if (g < gMin) {\n            gMin = g;\n        }\n        else if (g > gMax) {\n            gMax = g;\n        }\n        b = data[i + 2];\n        if (b < bMin) {\n            bMin = b;\n        }\n        else if (b > bMax) {\n            bMax = b;\n        }\n    }\n    if (rMax === rMin) {\n        rMax = 255;\n        rMin = 0;\n    }\n    if (gMax === gMin) {\n        gMax = 255;\n        gMin = 0;\n    }\n    if (bMax === bMin) {\n        bMax = 255;\n        bMin = 0;\n    }\n    let rMid, rGoalMax, rGoalMin, gMid, gGoalMax, gGoalMin, bMid, bGoalMax, bGoalMin;\n    if (enhanceAmount > 0) {\n        rGoalMax = rMax + enhanceAmount * (255 - rMax);\n        rGoalMin = rMin - enhanceAmount * (rMin - 0);\n        gGoalMax = gMax + enhanceAmount * (255 - gMax);\n        gGoalMin = gMin - enhanceAmount * (gMin - 0);\n        bGoalMax = bMax + enhanceAmount * (255 - bMax);\n        bGoalMin = bMin - enhanceAmount * (bMin - 0);\n    }\n    else {\n        rMid = (rMax + rMin) * 0.5;\n        rGoalMax = rMax + enhanceAmount * (rMax - rMid);\n        rGoalMin = rMin + enhanceAmount * (rMin - rMid);\n        gMid = (gMax + gMin) * 0.5;\n        gGoalMax = gMax + enhanceAmount * (gMax - gMid);\n        gGoalMin = gMin + enhanceAmount * (gMin - gMid);\n        bMid = (bMax + bMin) * 0.5;\n        bGoalMax = bMax + enhanceAmount * (bMax - bMid);\n        bGoalMin = bMin + enhanceAmount * (bMin - bMid);\n    }\n    for (let i = 0; i < nSubPixels; i += 4) {\n        data[i + 0] = remap(data[i + 0], rMin, rMax, rGoalMin, rGoalMax);\n        data[i + 1] = remap(data[i + 1], gMin, gMax, gGoalMin, gGoalMax);\n        data[i + 2] = remap(data[i + 2], bMin, bMax, bGoalMin, bGoalMax);\n    }\n};\nexports.Enhance = Enhance;\nFactory_1.Factory.addGetterSetter(Node_1.Node, 'enhance', 0, (0, Validators_1.getNumberValidator)(), Factory_1.Factory.afterSetFilter);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}